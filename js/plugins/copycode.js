function init(){document.querySelector("article.md-text");const d=document.querySelector("body");document.querySelectorAll("figure.highlight").forEach(l=>{var e=l.querySelector(".code"),c=document.createElement("div"),t=(c.classList.add("code-btns"),document.createElement("span"));t.classList.add("fullscreen-btn"),t.innerHTML=`<i class='fa-duotone fa-expand fa-fw'></i><span class="desc">放大</span>`,t.querySelector("span"),t.querySelector("i");t.addEventListener("click",()=>{document.querySelector(".fullscreen-container")?.remove();var e=document.createElement("div"),c=(e.classList.add("fullscreen-container"),l.cloneNode(!0));c.classList.add("fullscreen");let t=c.querySelector(".copy-btn"),s=t.querySelector("i"),a=t.querySelector("span");t.addEventListener("click",async()=>{await copyCode(c.querySelector(".code").children[0]?.innerText),a.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,t.classList.add("success"),s.classList.remove("fa-copy"),s.classList.remove("fa-circle-exclamation"),s.classList.add("fa-circle-check"),util.messageCopyright(),setTimeout(()=>{a.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,t.classList.remove("success"),s.classList.remove("fa-check"),s.classList.add("fa-copy")},3e3)});var n=c.querySelector(".fullscreen-btn"),o=n.querySelector("i"),i=n.querySelector("span");n.addEventListener("click",()=>{d.removeAttribute("style"),util.animateOut(c,"slide-out .5s")}),o.classList.remove("fa-expand"),o.classList.add("fa-compress"),i.innerText="缩小",e.appendChild(c),d.appendChild(e),d.setAttribute("style","overflow:hidden;"),util.animateIn(c,"slide-in .5s")}),c.appendChild(t);const s=document.createElement("span"),a=(s.classList.add("copy-btn"),s.innerHTML=`<i class='fa-duotone fa-copy fa-fw'></i><span class="desc">${stellar.GLOBAL_CONFIG.plugins.copycode.default_text}</span>`,s.querySelector("i")),n=s.querySelector("span");c.appendChild(s),s.addEventListener("click",async()=>{await copyCode(e.children[0]?.innerText),n.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,s.classList.add("success"),a.classList.remove("fa-copy"),a.classList.remove("fa-circle-exclamation"),a.classList.add("fa-circle-check"),util.messageCopyright(),setTimeout(()=>{n.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,s.classList.remove("success"),a.classList.remove("fa-check"),a.classList.add("fa-copy")},3e3)});var t=l.getAttribute("class").split(" ")[1],o=document.createElement("div"),t=(o.classList.add("code-lang"),o.innerHTML=`<span>${t}</span>`,document.createElement("div")),c=(t.classList.add("code-btns-and-lang"),t.appendChild(c),t.appendChild(o),document.createElement("div")),o=(c.classList.add("code-tools"),l.querySelector(".highlight figcaption"));o?c.appendChild(o):((o=document.createElement("figcaption")).innerHTML=`<span>${stellar.GLOBAL_CONFIG.config.default.codeblock_figtext}</span>`,c.appendChild(o)),c.appendChild(t),l.insertBefore(c,l.children[0])})}async function copyCode(e){if(navigator.clipboard)try{await navigator.clipboard.writeText(e)}catch(e){codeCopyBtnDesc.innerText="未获得用户许可",codeCopyBtn.classList.add("warning"),codeCopyBtnIcon.classList.remove("fa-copy"),codeCopyBtnIcon.classList.add("fa-circle-exclamation"),hud.message("未获得用户许可",e,{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning"),codeCopyBtnIcon.classList.remove("fa-circle-exclamation"),codeCopyBtnIcon.classList.add("fa-copy")},3e3)}else codeCopyBtnDesc.innerText="当前浏览器不支持此api",codeCopyBtn.classList.add("warning"),codeCopyBtnIcon.classList.remove("fa-copy"),codeCopyBtnIcon.classList.add("fa-circle-exclamation"),hud.message("COPY错误","当前浏览器不支持此api",{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning"),codeCopyBtnIcon.classList.remove("fa-circle-exclamation"),codeCopyBtnIcon.classList.add("fa-copy")},3e3)}init();