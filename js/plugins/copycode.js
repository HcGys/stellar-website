function init(){document.querySelectorAll(".code").forEach(e=>{var t=window.getComputedStyle(e,"::before").width.split("px")[0],i=window.getComputedStyle(e,"::before").padding.split(" ").pop().split("px")[0];const o=document.createElement("div");o.classList.add("copy-btn"),o.style.right=Number(t)+2*Number(i)+"px",o.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,e.appendChild(o),o.addEventListener("click",async()=>{await copyCode(e.children[0]?.innerText),o.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,o.classList.add("success"),util.messageCopyright(),setTimeout(()=>{o.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,o.classList.remove("success")},3e3)})})}async function copyCode(e){if(navigator.clipboard)try{await navigator.clipboard.writeText(e)}catch(e){codeCopyBtn.innerText="未获得用户许可",codeCopyBtn.classList.add("warning"),hud.message("未获得用户许可",e,{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtn.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning")},3e3)}else codeCopyBtn.innerText="当前浏览器不支持此api",codeCopyBtn.classList.add("warning"),hud.message("COPY错误","当前浏览器不支持此api",{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtn.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning")},3e3)}init(),stellar.pjax.push(init);