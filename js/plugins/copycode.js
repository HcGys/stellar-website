function init(){document.querySelectorAll("figure.highlight").forEach(e=>{var t=e.querySelector(".code"),s=document.createElement("div");s.classList.add("code-btns");const a=document.createElement("span"),n=(a.classList.add("fullscreen-btn"),a.innerHTML="<i class='fa-duotone fa-expand fa-fw'></i>",a.addEventListener("click",()=>{e.classList.toggle("fullscreen"),e.classList.contains("fullscreen")?(a.querySelector("i").classList.remove("fa-expand"),a.querySelector("i").classList.add("fa-compress"),document.querySelector("body").setAttribute("style","overflow:hidden;")):(a.querySelector("i").classList.remove("fa-compress"),a.querySelector("i").classList.add("fa-expand"),document.querySelector("body").removeAttribute("style"))}),s.appendChild(a),document.createElement("span"));n.classList.add("copy-btn"),n.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,s.appendChild(n),n.addEventListener("click",async()=>{await copyCode(t.children[0]?.innerText),n.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,n.classList.add("success"),util.messageCopyright(),setTimeout(()=>{n.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,n.classList.remove("success")},3e3)});var c=e.getAttribute("class").split(" ")[1],i=document.createElement("div"),c=(i.classList.add("code-lang"),i.innerHTML=`<span>${c}</span>`,document.createElement("div")),o=(c.classList.add("code-tools"),e.querySelector(".highlight figcaption"));o&&c.appendChild(o),c.appendChild(i),c.appendChild(s),e.insertBefore(c,e.children[0])})}async function copyCode(e){if(navigator.clipboard)try{await navigator.clipboard.writeText(e)}catch(e){codeCopyBtn.innerText="未获得用户许可",codeCopyBtn.classList.add("warning"),hud.message("未获得用户许可",e,{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtn.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning")},3e3)}else codeCopyBtn.innerText="当前浏览器不支持此api",codeCopyBtn.classList.add("warning"),hud.message("COPY错误","当前浏览器不支持此api",{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtn.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning")},3e3)}init();