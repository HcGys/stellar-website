function init(){document.querySelectorAll("figure.highlight").forEach(s=>{var e=s.querySelector(".code"),t=document.createElement("div"),c=(t.classList.add("code-btns"),document.createElement("span"));c.classList.add("fullscreen-btn"),c.innerHTML=`<i class='fa-duotone fa-expand fa-fw'></i><span class="desc">放大</span>`;const a=c.querySelector("span"),n=c.querySelector("i"),o=(c.addEventListener("click",()=>{var e,t;s.classList.toggle("to-fullscreen"),s.classList.contains("to-fullscreen")?(n.classList.remove("fa-expand"),n.classList.add("fa-compress"),a.innerText="缩小",(t=document.createElement("div")).classList.add(".fullscreen"),t.appendChild(s.cloneNode(!0)),(e=document.querySelector("body")).appendChild(t),e.setAttribute("style","overflow:hidden;")):(n.classList.remove("fa-compress"),n.classList.add("fa-expand"),a.innerText="放大",(t=document.querySelector("body")).querySelector("div.fullscreen").remove(),t.removeAttribute("style"),util.animateOut(s,"slide-out .5s"))}),t.appendChild(c),document.createElement("span")),i=(o.classList.add("copy-btn"),o.innerHTML=`<i class='fa-duotone fa-copy fa-fw'></i><span class="desc">${stellar.GLOBAL_CONFIG.plugins.copycode.default_text}</span>`,o.querySelector("i")),d=o.querySelector("span");t.appendChild(o),o.addEventListener("click",async()=>{await copyCode(e.children[0]?.innerText),d.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,o.classList.add("success"),i.classList.remove("fa-copy"),i.classList.remove("fa-circle-exclamation"),i.classList.add("fa-circle-check"),util.messageCopyright(),setTimeout(()=>{d.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,o.classList.remove("success"),i.classList.remove("fa-check"),i.classList.add("fa-copy")},3e3)});var c=s.getAttribute("class").split(" ")[1],l=document.createElement("div"),c=(l.classList.add("code-lang"),l.innerHTML=`<span>${c}</span>`,document.createElement("div")),t=(c.classList.add("code-btns-and-lang"),c.appendChild(t),c.appendChild(l),document.createElement("div")),l=(t.classList.add("code-tools"),s.querySelector(".highlight figcaption"));l?t.appendChild(l):t.appendChild(document.createElement("figcaption")),t.appendChild(c),s.insertBefore(t,s.children[0])})}async function copyCode(e){if(navigator.clipboard)try{await navigator.clipboard.writeText(e)}catch(e){codeCopyBtnDesc.innerText="未获得用户许可",codeCopyBtn.classList.add("warning"),codeCopyBtnIcon.classList.remove("fa-copy"),codeCopyBtnIcon.classList.add("fa-circle-exclamation"),hud.message("未获得用户许可",e,{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning"),codeCopyBtnIcon.classList.remove("fa-circle-exclamation"),codeCopyBtnIcon.classList.add("fa-copy")},3e3)}else codeCopyBtnDesc.innerText="当前浏览器不支持此api",codeCopyBtn.classList.add("warning"),codeCopyBtnIcon.classList.remove("fa-copy"),codeCopyBtnIcon.classList.add("fa-circle-exclamation"),hud.message("COPY错误","当前浏览器不支持此api",{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning"),codeCopyBtnIcon.classList.remove("fa-circle-exclamation"),codeCopyBtnIcon.classList.add("fa-copy")},3e3)}init();