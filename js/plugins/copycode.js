function init(){var e=document.querySelector("article.md-text");const c=e.classList.contains("reveal")||e.classList.contains("blur"),i=document.querySelector("body");document.querySelectorAll("figure.highlight").forEach(l=>{l.querySelector(".code");var e=document.createElement("div"),s=(e.classList.add("code-btns"),document.createElement("div"));if(s.classList.add("btn"),s.classList.add("fullscreen-btn"),s.innerHTML=`<i class='fa-duotone fa-expand fa-fw'></i><span class="desc">放大</span>`,!c){const codeFullscreenBtnDesc=s.querySelector("span"),codeFullscreenBtnIcon=s.querySelector("i")}s.addEventListener("click",()=>{if(c){document.querySelector(".fullscreen")?.remove();let e=l.cloneNode(!0),s=(e.classList.add("fullscreen"),e.querySelector(".copy-btn")),t=s.querySelector("i"),c=s.querySelector("span");s.addEventListener("click",async()=>{await copyCode(e.querySelector(".code").children[0]?.innerText),c.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,s.classList.add("success"),t.classList.remove("fa-copy"),t.classList.remove("fa-circle-exclamation"),t.classList.add("fa-circle-check"),util.messageCopyright(),setTimeout(()=>{c.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,s.classList.remove("success"),t.classList.remove("fa-check"),t.classList.add("fa-copy")},3e3)});var a=e.querySelector(".fullscreen-btn"),n=a.querySelector("i"),o=a.querySelector("span");a.addEventListener("click",()=>{i.removeAttribute("style"),util.animateOut(e,"slide-out .5s")}),n.classList.remove("fa-expand"),n.classList.add("fa-compress"),o.innerText="缩小",i.appendChild(e),i.setAttribute("style","overflow:hidden;"),util.animateIn(e,"slide-in .5s")}else stellar.requestAnimationFrame(()=>{l.classList.toggle("fullscreen"),l.classList.contains("fullscreen")?(codeFullscreenBtnIcon.classList.remove("fa-expand"),codeFullscreenBtnIcon.classList.add("fa-compress"),codeFullscreenBtnDesc.innerText="缩小",i.setAttribute("style","overflow:hidden;")):(codeFullscreenBtnIcon.classList.remove("fa-compress"),codeFullscreenBtnIcon.classList.add("fa-expand"),codeFullscreenBtnDesc.innerText="放大",i.removeAttribute("style"),util.animateOut(l,"slide-out .5s"))})}),e.appendChild(s);var s=document.createElement("div"),s=(s.classList.add("btn"),s.classList.add("copy-btn"),s.innerHTML=`<i class='fa-duotone fa-copy fa-fw'></i><span class="desc">${stellar.GLOBAL_CONFIG.plugins.copycode.default_text}</span>`,s.querySelector("i"),s.querySelector("span"),e.appendChild(s),copyCode(s),l.getAttribute("class").split(" ")[1]),t=document.createElement("div"),s=(t.classList.add("code-lang"),t.innerHTML=`<span>${s}</span>`,document.createElement("div")),e=(s.classList.add("code-btns-and-lang"),s.appendChild(e),s.appendChild(t),document.createElement("div")),t=(e.classList.add("code-tools"),l.querySelector(".highlight figcaption"));t?e.appendChild(t):((t=document.createElement("figcaption")).innerHTML=`<span>${stellar.GLOBAL_CONFIG.config.default.codeblock_figtext}</span>`,e.appendChild(t)),e.appendChild(s),l.insertBefore(e,l.children[0])})}function copyCode(e){e.onclick=e=>{e.stopPropagation(),code.focus();e=new Range,e.selectNodeContents(code),document.getSelection().removeAllRanges(),document.getSelection().addRange(e),e=document.getSelection().toString();util.writeClipText(e).then(()=>{util.messageCopyright(),codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.success_text,codeCopyBtn.classList.add("success"),codeCopyBtnIcon.classList.remove("fa-copy"),codeCopyBtnIcon.classList.remove("fa-circle-exclamation"),codeCopyBtnIcon.classList.add("fa-circle-check"),setTimeout(()=>{codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("success"),codeCopyBtnIcon.classList.remove("fa-check"),codeCopyBtnIcon.classList.add("fa-copy")},3e3)}).catch(e=>{codeCopyBtnDesc.innerText=e,codeCopyBtn.classList.add("warning"),codeCopyBtnIcon.classList.remove("fa-copy"),codeCopyBtnIcon.classList.add("fa-circle-exclamation"),hud.message("COPY错误",e,{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{codeCopyBtnDesc.innerText=stellar.GLOBAL_CONFIG.plugins.copycode.default_text,codeCopyBtn.classList.remove("warning"),codeCopyBtnIcon.classList.remove("fa-circle-exclamation"),codeCopyBtnIcon.classList.add("fa-copy")},3e3)})}}function copyLineCode(){document.querySelectorAll("button.copy-btn").forEach(t=>{t.onclick=e=>{e.stopPropagation();e=t.previousSibling.innerText;const s=t.firstChild;util.writeClipText(e).then(()=>{util.messageCopyright(),t.classList.add("success"),s.classList.remove("fa-calendar-lines"),s.classList.remove("fa-calendar-xmark"),s.classList.add("fa-calendar-check"),setTimeout(()=>{t.classList.remove("success"),s.classList.remove("fa-calendar-check"),s.classList.add("fa-calendar-lines")},3e3)}).catch(e=>{t.classList.add("warning"),s.classList.remove("fa-calendar-lines"),s.classList.add("fa-calendar-xmark"),hud.message("COPY错误",e,{icon:"fa-duotone fa-exclamation-square red",displayMode:1,time:9e3}),setTimeout(()=>{t.classList.remove("warning"),s.classList.remove("fa-calendar-xmark"),s.classList.add("fa-calendar-lines")},3e3)})}})}init(),copyLineCode();