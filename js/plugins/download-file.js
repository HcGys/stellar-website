function extToMimes(e){let a=void 0;switch(e){case"jpg":a="image/jpeg";break;case"png":a="image/png";break;case"jpeg":a="image/jpeg";break;case"gif":a="image/gif";break;case"bmp":a="image/bmp";break;case"txt":a="text/plain";break;case"xls":a="application/vnd.ms-excel";break;case"doc":a="application/msword";break;case"pdf":a="application/pdf";break;case"xlsx":a="application/vnd.ms-excel";break;case"csv":a="text/csv";break;case"mp4":a="video/mp4";break;case"avi":a="video/x-msvideo";break;case"WindowsMediaVideo":a="video/x-ms-wmv";break;case"mov":a="video/quicktime";break;case"flash":a="video/x-flv";break;case"mkv":a="video/x-matroska";break;case"mp3":a="audio/mpeg";break;case"wav":a="audio/wav";break;case"flac":a="audio/flac";break;case"aac":a="audio/aac";break;case"wma":a="audio/x-ms-wma";break;default:a="text/plain"}return a}function formatFileSize(e){var a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];let i=e,t=0;for(;1024<=i&&t<a.length-1;)i/=1024,t++;return""+(i=Math.round(100*i)/100)+a[t]}var file_contents={};function cacheDatas(e,a){var i=a.file,a=e.split("/").at(-1),t=extToMimes(a.split(".")[1]),n=i?i.data.length:0,o=new ArrayBuffer(n),c=new Uint8Array(o);for(let e=0;e<n;++e)c[e]=i.data[e];var o=new Blob([o],{type:t}),t=formatFileSize(o.size),r={};r.name=a,r.size=t,r.blob=o,file_contents[e]=r}function renderFileDom(e,a){e=e.querySelector(".file-size"),a=file_contents[a].size;e&&a&&(e.innerHTML=a)}function downloadFile(e){var e=file_contents[e],a=document.createElement("a");a.download=e.name,a.href=URL.createObjectURL(e.blob),document.body.appendChild(a),a.click(),document.body.removeChild(a)}function downloadFileEvent(t){for(let e=0;e<t.length;++e){let a=t[e],i=a.querySelector("div.left>span").innerText;var n=stellar.GLOBAL_CONFIG.tag_plugins.link.api+"?type=file&url="||"https://api.vlts.cc/site_info/v1?type=file&url=";fetch(n+i).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){cacheDatas(i,e),renderFileDom(a,i)}).catch(function(e){console.log(e)}),a.addEventListener("click",()=>{downloadFile(i)})}}