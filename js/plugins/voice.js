function draw(e){var t=[],o=e.getChannelData(0),r=[],n=[];for(let e=0;e<o.length;e+=50)t.push(o[e]);for(let e=0,o=t.length/10;e<o;e++){var a=t.slice(10*e,10*(e+1));r.push(Math.max(...a)),n.push(Math.min(...a))}e=document.querySelector("#canvas");if(e.getContext){var l=e.getContext("2d"),e=(e.width=r.length,l.createLinearGradient(0,0,e.width,0));e.addColorStop(0,"yellow"),e.addColorStop(.5,"red"),e.addColorStop(1,"blue"),l.fillStyle=e,l.beginPath(),l.moveTo(0,75);for(let e=0;e<r.length;e++)l.lineTo(0+e+.5,75-50*r[e]);for(let e=n.length-1;0<=e;e--)l.lineTo(0+e+.5,75+50*Math.abs(n[e]));l.fill()}}function setVoiceWaveCard(e){(e="forEach"in(e||{})?e:document.querySelectorAll(".voice>audio")).forEach(r=>{if(1===r.nodeType){r.crossOrigin="anonymous";let o=new AudioContext,t=o.createBufferSource();var e=r.querySelector("source").src;fetch(e,{method:"GET",responseType:"arraybuffer"}).then(e=>{if(e.ok)return e.arrayBuffer();throw new Error("Network response was not ok.")}).then(e=>{o.decodeAudioData(e).then(e=>{draw(e),r.parentElement.querySelector(".voice-seconds").innerHTML=r.duration,t.buffer=e,t.connect(o.destination)})}).catch(function(e){console.log(e)})}})}