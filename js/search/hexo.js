let SearchService=(()=>{const c={queryText:null,data:null};return c.template=`<div id="u-search">
  <div class="modal">
    <header class="modal-header" class="clearfix">
      <form id="u-search-modal-form" class="u-search-form" name="uSearchModalForm">
        <input type="text" id="u-search-modal-input" class="u-search-input" />
        <button type="submit" id="u-search-modal-btn-submit" class="u-search-btn-submit">
          <span class="fa-duotone fa-search"></span>
        </button>
      </form>
      <a id="u-search-btn-close" class="btn-close"> <span class="fa-duotone fa-times"></span> </a>
    </header>
    <main class="modal-body">
      <ul class="modal-results"></ul>
    </main>
  </div>
  <div id="modal-overlay" class="modal-overlay"></div>
</div>
`,c.init=async()=>{var e=document.createElement("div");e.innerHTML+=c.template,document.body.append(e),document.querySelectorAll(".u-search-form").forEach(e=>{e.addEventListener("submit",c.onSubmit,!1)}),document.querySelector("#u-search-modal-input").addEventListener("input",c.onSubmit),document.querySelector("#u-search-btn-close").addEventListener("click",c.close,!1),document.querySelector("#modal-overlay").addEventListener("click",c.close,!1),c.data||(c.data=await c.fetchData()),c.modal=document.querySelector("#u-search .modal"),c.modal_overlay=document.querySelector("#u-search .modal-overlay")},c.onSubmit=e=>{e.preventDefault();var t=e.target.querySelector(".u-search-input");c.queryText=(t||e.target).value,c.queryText&&c.search()},c.search=async()=>{document.querySelector("body").setAttribute("style","overflow:hidden;"),document.querySelectorAll(".u-search-input").forEach(e=>{e.value=c.queryText}),util.animateIn(c.modal,"slide-in .5s"),util.animateIn(c.modal_overlay,"to_show 0.5s"),c.data||(c.data=await c.fetchData());let e="";""===(e=(e+=c.buildResultList(c.data.pages))+c.buildResultList(c.data.posts))&&(e=`<div id="resule-hits-empty"><i class="fa-solid fa-box-open"></i><p>${stellar.GLOBAL_CONFIG.languages.search.hits_empty.replace(/\$\{query}/,c.queryText)}</p></div>`),document.querySelector("#u-search .modal-results").innerHTML=e,document.addEventListener("keydown",function e(t){"Escape"===t.code&&(c.close(),document.removeEventListener("keydown",e))})},c.close=()=>{util.animateOut(c.modal,"slide-out .5s"),util.animateOut(c.modal_overlay,"to_hide 0.5s"),document.querySelector("body").removeAttribute("style")},c.fetchData=()=>fetch(stellar.GLOBAL_CONFIG.search.dataPath).then(e=>e.text()).then(e=>{return JSON.parse(e)}),c.buildResultList=e=>{let t="";return e.forEach(e=>{e.text&&(e.text=e.text.replace(/12345\d*/g,"")),!e.title&&e.text&&(e.title=e.text.trim().slice(0,15)),c.contentSearch(e)&&(t+=c.buildResult(e.permalink,e.title,e.digest))}),t},c.contentSearch=r=>{let a=r.title.trim().toLowerCase(),l=r.text.trim().toLowerCase(),s=c.queryText.trim().toLowerCase().split(/[-\s]+/),i=!1,n,u=-1,o=-1;return a&&l&&s.forEach((t,e)=>{if(n=a.indexOf(t),u=l.indexOf(t),n<0&&u<0?i=!1:(i=!0,u<0&&(u=0),0===e&&(o=u)),i){l=r.text.trim();let e=0;if(0<=o){t=Math.max(o-40,0),e=0===t?Math.min(200,l.length):Math.min(o+120,l.length);let a=l.substring(t,e);s.forEach(function(e){var t=new RegExp(e,"gi");a=a.replace(t,"<b mark>"+e+"</b>")}),r.digest=a+"......"}else e=Math.min(200,l.length),r.digest=l.trim().substring(0,e)}}),i},c.buildResult=(e,t,a)=>{e=c.getUrlRelativePath(e);let r="";return r=(r+="<li>")+("<a class='result' href='"+e+"?keyword="+c.queryText+"'>")+("<span class='title'>"+t+"</span>"),""!==a&&(r+="<span class='digest'>"+a+"</span>"),r=r+"</a>"+"</li>"},c.getUrlRelativePath=function(e){var e=e.split("//"),t=e[1].indexOf("/");let a=e[1].substring(t);return a=-1!=a.indexOf("?")?a.split("?")[0]:a},{init:()=>{c.init()},setQueryText:e=>{c.queryText=e},search:()=>{c.search()}}})();Object.freeze(SearchService),SearchService.init();